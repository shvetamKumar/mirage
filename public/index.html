<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mirage - Mock Endpoint Dashboard</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <!-- Login/Register Modal -->
    <div id="authModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="authTitle">Login</h2>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <div id="loginForm" class="auth-form">
            <form id="loginFormElement">
              <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" name="email" required />
              </div>
              <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" name="password" required />
              </div>
              <button type="submit" class="btn btn-primary">Login</button>
              <p class="auth-switch">
                Don't have an account? <a href="#" id="showRegister">Register</a>
              </p>
            </form>
          </div>
          <div id="registerForm" class="auth-form hidden">
            <form id="registerFormElement">
              <div class="form-group">
                <label for="registerEmail">Email</label>
                <input type="email" id="registerEmail" name="email" required />
              </div>
              <div class="form-group">
                <label for="registerPassword">Password</label>
                <input type="password" id="registerPassword" name="password" required />
              </div>
              <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" name="first_name" />
              </div>
              <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" name="last_name" />
              </div>
              <button type="submit" class="btn btn-primary">Register</button>
              <p class="auth-switch">
                Already have an account? <a href="#" id="showLogin">Login</a>
              </p>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Navigation -->
    <header class="header">
      <div class="container">
        <div class="nav-brand">
          <img src="/mirage.png" alt="Mirage Logo" class="logo" />
        </div>
        <nav class="nav">
          <ul class="nav-list" id="authenticatedNav" style="display: none">
            <li>
              <a href="#dashboard" class="nav-link active" data-section="dashboard">Dashboard</a>
            </li>
            <li><a href="#endpoints" class="nav-link" data-section="endpoints">Endpoints</a></li>
            <li><a href="#profile" class="nav-link" data-section="profile">Profile</a></li>
            <li><button id="logoutBtn" class="btn btn-secondary">Logout</button></li>
          </ul>
          <div id="unauthenticatedNav">
            <button id="loginBtn" class="btn btn-primary">Login</button>
          </div>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="container">
        <!-- Welcome Section (shown when not logged in) -->
        <section id="welcomeSection" class="welcome-section">
          <div class="hero">
            <h2>Welcome to Mirage</h2>
            <p>Create and manage mock API endpoints for development and testing</p>
            <button id="getStartedBtn" class="btn btn-primary btn-large">Get Started</button>
          </div>
          <div class="features">
            <div class="feature">
              <h3>Easy Setup</h3>
              <p>Create mock endpoints with simple configuration</p>
            </div>
            <div class="feature">
              <h3>Flexible Responses</h3>
              <p>Customize response data, status codes, and headers</p>
            </div>
            <div class="feature">
              <h3>Real-time Management</h3>
              <p>Enable/disable endpoints and track usage</p>
            </div>
          </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboardSection" class="content-section hidden">
          <h2>Dashboard</h2>
          <div class="dashboard-stats">
            <div class="stat-card">
              <h3 id="totalEndpoints">0</h3>
              <p>Total Endpoints</p>
            </div>
            <div class="stat-card">
              <h3 id="activeEndpoints">0</h3>
              <p>Active Endpoints</p>
            </div>
            <div class="stat-card">
              <h3 id="totalRequests">0</h3>
              <p>Total Requests</p>
            </div>
          </div>
          <div class="recent-activity">
            <h3>Recent Activity</h3>
            <div id="recentActivityList" class="activity-list">
              <!-- Recent activity items will be populated here -->
            </div>
          </div>
        </section>

        <!-- Endpoints Section -->
        <section id="endpointsSection" class="content-section hidden">
          <div class="section-header">
            <h2>Mock Endpoints</h2>
            <button id="addEndpointBtn" class="btn btn-primary">Add Endpoint</button>
          </div>
          <div class="endpoints-filters">
            <div class="filter-group">
              <label for="methodFilter">Method:</label>
              <select id="methodFilter">
                <option value="">All Methods</option>
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
                <option value="PATCH">PATCH</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="statusFilter">Status:</label>
              <select id="statusFilter">
                <option value="">All</option>
                <option value="true">Active</option>
                <option value="false">Inactive</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="searchFilter">Search:</label>
              <input type="text" id="searchFilter" placeholder="Search endpoints..." />
            </div>
          </div>
          <div id="endpointsList" class="endpoints-list">
            <!-- Endpoints will be populated here -->
          </div>
        </section>

        <!-- Profile Section -->
        <section id="profileSection" class="content-section hidden">
          <h2>Profile</h2>
          <div id="userProfile" class="profile-info">
            <!-- User profile will be populated here -->
          </div>
          <div class="api-keys-section">
            <div class="section-header">
              <h3>API Keys</h3>
              <button id="addApiKeyBtn" class="btn btn-primary">Create API Key</button>
            </div>
            <div id="apiKeysList" class="api-keys-list">
              <!-- API keys will be populated here -->
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Endpoint Modal -->
    <div id="endpointModal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2 id="endpointModalTitle">Add Endpoint</h2>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <form id="endpointForm">
            <div class="form-row">
              <div class="form-group">
                <label for="endpointName">Name</label>
                <input type="text" id="endpointName" name="name" required />
              </div>
              <div class="form-group">
                <label for="endpointMethod">Method</label>
                <select id="endpointMethod" name="method" required>
                  <option value="GET">GET</option>
                  <option value="POST">POST</option>
                  <option value="PUT">PUT</option>
                  <option value="DELETE">DELETE</option>
                  <option value="PATCH">PATCH</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="endpointUrl">URL Pattern</label>
              <input
                type="text"
                id="endpointUrl"
                name="url_pattern"
                placeholder="/api/users/{id}"
                required
              />
            </div>
            <div class="form-group">
              <label for="endpointDescription">Description</label>
              <textarea id="endpointDescription" name="description" rows="3"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="endpointStatus">Status Code</label>
                <input
                  type="number"
                  id="endpointStatus"
                  name="status_code"
                  value="200"
                  min="100"
                  max="599"
                  required
                />
              </div>
              <div class="form-group">
                <label for="endpointDelay">Delay (ms)</label>
                <input
                  type="number"
                  id="endpointDelay"
                  name="delay"
                  value="0"
                  min="0"
                  max="10000"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="endpointHeaders">Headers (JSON)</label>
              <textarea
                id="endpointHeaders"
                name="headers"
                rows="3"
                placeholder='{"Content-Type": "application/json"}'
              ></textarea>
            </div>
            <div class="form-group">
              <label for="endpointResponse">Response Body (JSON)</label>
              <textarea
                id="endpointResponse"
                name="response_body"
                rows="6"
                placeholder='{"message": "Hello World"}'
              ></textarea>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="cancelEndpoint">Cancel</button>
              <button type="submit" class="btn btn-primary">Save Endpoint</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- API Key Modal -->
    <div id="apiKeyModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create API Key</h2>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <form id="apiKeyForm">
            <div class="form-group">
              <label for="apiKeyName">Name</label>
              <input type="text" id="apiKeyName" name="name" required />
            </div>
            <div class="form-group">
              <label for="apiKeyExpires">Expires At (optional)</label>
              <input type="datetime-local" id="apiKeyExpires" name="expires_at" />
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="cancelApiKey">Cancel</button>
              <button type="submit" class="btn btn-primary">Create Key</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
      <div class="spinner"></div>
    </div>

    <!-- Alert Messages -->
    <div id="alertContainer" class="alert-container"></div>

    <script src="/js/app.js"></script>
  </body>
</html>
